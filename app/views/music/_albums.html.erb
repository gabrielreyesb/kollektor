<% @albums.each do |album| %>
  <div class="col-6 col-sm-4 col-md-3 col-lg-2">
    <div class="card h-100">
      <%= link_to album_path(album) do %>
        <% if album.cover_image.attached? %>
          <%= image_tag album.cover_image, class: "card-img-top", loading: "lazy", style: "aspect-ratio: 1; object-fit: cover;" %>
        <% else %>
          <div class="bg-light d-flex align-items-center justify-content-center" style="aspect-ratio: 1;">
            <i class="bi bi-disc text-muted" style="font-size: 2rem;"></i>
          </div>
        <% end %>
      <% end %>
      <div class="card-body p-2">
        <!-- Album title and likes are always visible -->
        <div class="d-flex justify-content-between align-items-center mb-1">
          <h6 class="card-title mb-0 text-truncate"><%= album.name %></h6>
          <small class="text-white ms-2">
            <i class="bi bi-headphones"></i>
            <span id="likes-count-<%= album.id %>"><%= album.likes_count %></span>
          </small>
        </div>
        
        <p class="card-text text-muted small mb-2">
          <i class="bi bi-music-note me-1"></i><%= album.genre.name %> •
          <i class="bi bi-person me-1"></i><%= album.author.name %> •
          <i class="bi bi-calendar me-1"></i><%= album.year %>
        </p>
      </div>

      <div class="card-footer bg-transparent border-top-0">
        <div class="btn-group btn-group-sm w-100">
          <%= link_to edit_album_path(album), class: "btn btn-outline-primary" do %>
            <i class="bi bi-pencil"></i>
          <% end %>
          <%= link_to album, 
              class: "btn btn-outline-danger",
              data: { turbo_method: :delete, 
                      turbo_confirm: "Are you sure?" } do %>
            <i class="bi bi-trash"></i>
          <% end %>
        </div>
      </div>
    </div>
  </div>
<% end %> 